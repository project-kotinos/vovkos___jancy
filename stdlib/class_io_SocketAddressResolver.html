

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>class io.SocketAddressResolver &mdash; Jancy Standard Library Reference</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'1.8.5',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/target-highlight.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="USB Communications" href="group_usb.html" />
    <link rel="prev" title="class io.Socket" href="class_io_Socket.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Jancy Standard Library Reference
          

          
          </a>

          
            
            
              <div class="version">
                1.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="group_g2_crt.html">C Runtime Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_stdlib.html">General Purpose Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="group_iolib.html">IO (Input/Output) Library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="group_devmon.html">Device Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="group_file.html">Generic File IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="group_network-adapter.html">Network Adapter Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="group_pcap.html">Pcap (Packet Capturing Library)</a></li>
<li class="toctree-l2"><a class="reference internal" href="group_ssh.html">SSH Communications</a></li>
<li class="toctree-l2"><a class="reference internal" href="group_serial.html">Serial Communications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="group_socket.html">Socket Communications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="enum_io_AddressFamily.html">enum io.AddressFamily</a></li>
<li class="toctree-l3"><a class="reference internal" href="enum_io_Protocol.html">enum io.Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="enum_io_SocketEvents.html">bitflag enum io.SocketEvents</a></li>
<li class="toctree-l3"><a class="reference internal" href="enum_io_SocketOptions.html">bitflag enum io.SocketOptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="struct_io_SocketAddress_ip4.html">struct io.SocketAddress_ip4</a></li>
<li class="toctree-l3"><a class="reference internal" href="struct_io_SocketAddress_ip6.html">struct io.SocketAddress_ip6</a></li>
<li class="toctree-l3"><a class="reference internal" href="union_io_Address_ip4.html">union io.Address_ip4</a></li>
<li class="toctree-l3"><a class="reference internal" href="union_io_Address_ip6.html">union io.Address_ip6</a></li>
<li class="toctree-l3"><a class="reference internal" href="union_io_SocketAddress.html">union io.SocketAddress</a></li>
<li class="toctree-l3"><a class="reference internal" href="class_io_Socket.html">class io.Socket</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">class io.SocketAddressResolver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="group_usb.html">USB Communications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="group_rtl.html">RTL (Runtime Library)</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_g1_typedef.html">Standard Typedefs</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_syslib.html">System Facilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="syncId.html">syncId Model Explanation</a></li>
<li class="toctree-l1"><a class="reference internal" href="disposable.html">Using Disposable Pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="errorcode.html">errorcode Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Jancy Standard Library Reference</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="group_iolib.html">IO (Input/Output) Library</a> &raquo;</li>
        
          <li><a href="group_socket.html">Socket Communications</a> &raquo;</li>
        
      <li>class io.SocketAddressResolver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="class-io-socketaddressresolver">
<span id="doxid-type-io-socketaddressresolver"></span><span id="index-0"></span><h1>class io.SocketAddressResolver</h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview</h2>
<p>This class provides an asynchrounous interface for resolving host
names into socket addresses. <a class="reference internal" href="#details-type-io-socketaddressresolver"><span class="std std-ref">Moreâ€¦</span></a></p>
<pre class="highlight doxyrest-overview-code-block literal-block">
<span></span><span class="k">import</span> <span class="s">&quot;io_base.jncx&quot;</span>
<span class="k">import</span> <span class="s">&quot;io_SocketAddressResolver.jncx&quot;</span>

<span class="k">class</span> <span class="n">SocketAddressResolver</span>
<span class="p">{</span>
    <span class="c1">// typedefs</span>

    <span class="k">typedef</span> <span class="k">void</span> <span class="doxyrest-code-target target" id="doxid-typedef-io-socketaddressresolver-completionfunc">CompletionFunc</span><span></span><span class="p">(</span>
        <a class="reference internal" href="union_io_SocketAddress.html#doxid-type-io-socketaddress"><span class="std std-ref">io.SocketAddress</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">addressTable</span><span class="p">,</span>
        <a class="reference internal" href="group_g1_typedef.html#doxid-typedef-size-t"><span class="std std-ref">size_t</span></a><span></span> <span class="n">addressCount</span><span class="p">,</span>
        <a class="reference internal" href="struct_std_Error.html#doxid-type-std-error"><span class="std std-ref">std.Error</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">error</span>
        <span class="p">);</span>

    <span class="c1">// construction</span>

    <span class="doxyrest-code-target target" id="doxid-function-io-socketaddressresolver-construct">construct</span><span></span><span class="p">();</span>

    <span class="c1">// methods</span>

    <a class="reference internal" href="group_g1_typedef.html#doxid-typedef-uintptr-t"><span class="std std-ref">uintptr_t</span></a><span></span> <span class="k">errorcode</span> <a class="reference internal" href="#doxid-function-io-socketaddressresolver-resolve"><span class="std std-ref">resolve</span></a><span></span><span class="p">(</span>
        <span class="k">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span>
        <a class="reference internal" href="enum_io_AddressFamily.html#doxid-type-io-addressfamily"><span class="std std-ref">io.AddressFamily</span></a><span></span> <span class="n">family</span><span class="p">,</span>
        <a class="reference internal" href="#doxid-typedef-io-socketaddressresolver-completionfunc"><span class="std std-ref">io.SocketAddressResolver.CompletionFunc</span></a><span></span><span class="o">*</span> <span class="n">completionFunc</span>
        <span class="p">);</span>

    <a class="reference internal" href="group_g1_typedef.html#doxid-typedef-uintptr-t"><span class="std std-ref">uintptr_t</span></a><span></span> <span class="k">errorcode</span> <span class="doxyrest-code-target target" id="doxid-function-io-socketaddressresolver-resolve-2">resolve</span><span></span><span class="p">(</span>
        <span class="k">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span>
        <a class="reference internal" href="#doxid-typedef-io-socketaddressresolver-completionfunc"><span class="std std-ref">io.SocketAddressResolver.CompletionFunc</span></a><span></span><span class="o">*</span> <span class="n">completionFunc</span>
        <span class="p">);</span>

    <span class="k">bool</span> <a class="reference internal" href="#doxid-function-io-socketaddressresolver-cancel"><span class="std std-ref">cancel</span></a><span></span><span class="p">(</span><a class="reference internal" href="group_g1_typedef.html#doxid-typedef-uintptr-t"><span class="std std-ref">uintptr_t</span></a><span></span> <span class="n">id</span><span class="p">);</span>
    <span class="k">void</span> <a class="reference internal" href="#doxid-function-io-socketaddressresolver-cancelall"><span class="std std-ref">cancelAll</span></a><span></span><span class="p">();</span>

    <span class="c1">// aliases</span>

    <span class="k">alias</span> <a class="reference internal" href="#doxid-alias-io-socketaddressresolver-dispose"><span class="std std-ref">dispose</span></a><span></span> <span class="o">=</span> <span class="n">cancelAll</span><span class="p">;</span>
<span class="p">};</span>
</pre>
</div>
<div class="section" id="detailed-documentation">
<span id="details-type-io-socketaddressresolver"></span><h2>Detailed Documentation</h2>
<p>This class provides an asynchrounous interface for resolving host
names into socket addresses.</p>
<p>In the most general case conversion of a host name such as <code class="docutils literal notranslate"><span class="pre">tibbo.com</span></code>
into an <code class="docutils literal notranslate"><span class="pre">IP</span></code> requires sending and receiving network packets and,
therefore, may take substantial time. Doing this operation synchronoulsy,
while acceptable in many cases, is not really optimal for interactive GUI
applications where we do not want to have moments of <em>non-responsiveness</em>.
For such cases using <code class="docutils literal notranslate"><span class="pre">io.SocketAddressResolver</span></code> may be a better approach.</p>
<p>A typical sequence of steps when resolving a host address looks like this:</p>
<ul class="simple">
<li>Assign your event handler using <code class="docutils literal notranslate"><span class="pre">m_onResolverEvent</span></code> (you would probably
also want to <em>schedule</em> your event handler to be run in particular
environment, e.g. in specific thread)</li>
<li>Start one or more resolve requests with <code class="docutils literal notranslate"><span class="pre">resolve</span></code> method;</li>
<li>Wait until <code class="docutils literal notranslate"><span class="pre">ResolveCompleted</span></code> or <code class="docutils literal notranslate"><span class="pre">ResolveError</span></code> event;</li>
<li>Cancel all pending resolve requests with <code class="docutils literal notranslate"><span class="pre">cancelAll</span></code> method.</li>
</ul>
<p class="rubric">Sample code:</p>
<pre class="highlight literal-block">
<span></span><span class="k">class</span> <span class="n">MyDialog</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="n">io</span><span class="p">.</span><span class="n">SocketAddressResolver</span> <span class="n">m_resolver</span><span class="p">;</span>
    <span class="n">uint_t</span> <span class="n">m_syncId</span><span class="p">;</span>

    <span class="n">resolve</span><span class="p">(</span><span class="k">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">hostName</span><span class="p">);</span>

    <span class="n">onResolverEvent</span><span class="p">(</span>
        <span class="n">uint_t</span> <span class="n">syncId</span><span class="p">,</span>
        <a class="reference internal" href="union_io_SocketAddress.html#doxid-type-io-socketaddress"><span class="std std-ref">io.SocketAddress</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">addressTable</span><span class="p">,</span>
        <span class="n">size_t</span> <span class="n">addressCount</span><span class="p">,</span>
        <a class="reference internal" href="struct_std_Error.html#doxid-type-std-error"><span class="std std-ref">std.Error</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">error</span>
        <span class="p">);</span>
<span class="p">}</span>

<span class="n">MyDialog</span><span class="p">.</span><span class="n">resolve</span><span class="p">(</span><span class="k">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">hostName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="k">try</span> <span class="n">m_resolver</span><span class="p">.</span><span class="n">resolve</span><span class="p">(</span>
        <span class="n">hostName</span><span class="p">,</span>
        <span class="n">onResolveCompleted</span> <span class="o">~</span><span class="p">(</span><span class="o">++</span><span class="n">m_syncId</span><span class="p">)</span> <span class="o">@</span> <span class="n">g_mainThreadScheduler</span>
        <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// handle the error...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">MyDialog</span><span class="p">.</span><span class="n">onResolveCompleted</span><span class="p">(</span>
    <span class="n">uint_t</span> <span class="n">syncId</span><span class="p">,</span>
    <a class="reference internal" href="union_io_SocketAddress.html#doxid-type-io-socketaddress"><span class="std std-ref">io.SocketAddress</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">addressTable</span><span class="p">,</span>
    <span class="n">size_t</span> <span class="n">addressCount</span><span class="p">,</span>
    <a class="reference internal" href="struct_std_Error.html#doxid-type-std-error"><span class="std std-ref">std.Error</span></a><span></span> <span class="k">const</span><span class="o">*</span> <span class="n">error</span>
    <span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">syncId</span> <span class="o">!=</span> <span class="n">m_syncId</span><span class="p">)</span> <span class="c1">// late event</span>
        <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// handle error</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// hostname successfully resolved; result is at: addressTable</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p class="rubric">See also:</p>
<p><code class="doxyrest-cref docutils literal notranslate"><a class="reference internal" href="union_io_SocketAddress.html#doxid-type-io-socketaddress"><span class="std std-ref"><span class="pre">io.SocketAddress</span></span></a></code></p>
<div class="section" id="methods">
<h3>Methods</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-function-io-socketaddressresolver-resolve">
<span id="index-1"></span><a class="reference internal" href="group_g1_typedef.html#doxid-typedef-uintptr-t"><span class="std std-ref">uintptr_t</span></a><span></span> <span class="k">errorcode</span> <span class="n">resolve</span><span class="p">(</span>
    <span class="k">char</span> <span class="k">const</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span>
    <a class="reference internal" href="enum_io_AddressFamily.html#doxid-type-io-addressfamily"><span class="std std-ref">io.AddressFamily</span></a><span></span> <span class="n">family</span><span class="p">,</span>
    <a class="reference internal" href="#doxid-typedef-io-socketaddressresolver-completionfunc"><span class="std std-ref">io.SocketAddressResolver.CompletionFunc</span></a><span></span><span class="o">*</span> <span class="n">completionFunc</span>
    <span class="p">)</span>
</pre>
<p>Starts a new resolve request, bumps <code class="docutils literal notranslate"><span class="pre">m_syncId</span></code> and assigns it to the
new request.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> on success. If a resolve request could not be started,
IO error supplied by operating system is set and then the function
returns <code class="docutils literal notranslate"><span class="pre">false</span></code> <a class="footnote-reference" href="#f1" id="id1"><sup>1</sup></a>.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-function-io-socketaddressresolver-cancel">
<span id="index-2"></span><span></span><span class="k">bool</span> <span class="n">cancel</span><span class="p">(</span><a class="reference internal" href="group_g1_typedef.html#doxid-typedef-uintptr-t"><span class="std std-ref">uintptr_t</span></a><span></span> <span class="n">id</span><span class="p">)</span>
</pre>
<p>Cancels an on-going resolve requests identified by <code class="docutils literal notranslate"><span class="pre">syncId</span></code>, does
nothing is <code class="docutils literal notranslate"><span class="pre">syncId</span></code> request is not found.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-function-io-socketaddressresolver-cancelall">
<span id="index-3"></span><span></span><span class="k">void</span> <span class="n">cancelAll</span><span class="p">()</span>
</pre>
<p>Cancels all on-going resolve requests.</p>
<p>Sometimes it may be convenient to use <em>disposable</em> pattern to ensure
timely invokation of <code class="docutils literal notranslate"><span class="pre">cancelAll</span></code> <a class="footnote-reference" href="#f2" id="id2"><sup>2</sup></a>.</p>
</div>
<div class="section" id="aliases">
<h3>Aliases</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-alias-io-socketaddressresolver-dispose">
<span id="index-4"></span><span></span><span class="k">alias</span> <span class="n">dispose</span> <span class="o">=</span> <span class="n">cancelAll</span>
</pre>
<p>Effectively makes <code class="docutils literal notranslate"><span class="pre">io.SocketAddressResolver</span></code> a <em>disposable</em> class
<a class="footnote-reference" href="#f2" id="id3"><sup>2</sup></a>.</p>
<hr class="docutils" />
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>You can use exception semantics to handle the erroneous return values of <code class="docutils literal notranslate"><span class="pre">errorcode</span></code> functions. For more details refer to <a class="reference internal" href="errorcode.html#errorcode"><span class="std std-ref">errorcode Functions</span></a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>You can ensure timely release of resources by using <em>disposable</em> pattern. For more details refer to <a class="reference internal" href="disposable.html#disposable"><span class="std std-ref">Using Disposable Pattern</span></a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>When assigining scheduled event handlers, you need to make sure the particular event is still relevant. For more details refer to <a class="reference internal" href="syncId.html#sync-id"><span class="std std-ref">syncId Model Explanation</span></a>.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="group_usb.html" class="btn btn-neutral float-right" title="USB Communications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="class_io_Socket.html" class="btn btn-neutral float-left" title="class io.Socket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2019, Tibbo Technology Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>